!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){const n=document.querySelector("#minesweeper"),s=document.querySelector("form input[name=size]"),r=document.querySelector("form input[name=nMines]"),a=document.querySelector("form #submit"),o=document.getElementById("result");let c=NodeList,i=NodeList;function l(){o.classList.remove("won"),o.classList.remove("lost");const e=parseInt(s.value,10),t=parseInt(r.value,10);n.innerHTML="",Array(e).fill().forEach(()=>{const t=document.createElement("tr");Array(e).fill().forEach(()=>{const e=document.createElement("td");e.classList.add("unopened"),e.setAttribute("data-number",0),t.appendChild(e)}),n.appendChild(t)});const a=[];Array(t).fill().forEach(()=>{const t=function e(t,n){const s=[Math.floor(Math.random()*n),Math.floor(Math.random()*n)];return t.includes(s)&&e(t),t.push(s),s}(a,e);n.rows[t[0]].cells[t[1]].classList.add("mine")})}function u(e,t){const n=e.cellIndex,s=e.parentElement.rowIndex,r=[];return(c=Array.from(c).filter(t)).forEach(e=>{const t=e.cellIndex,a=e.parentElement.rowIndex,o=Math.abs(t-n),c=Math.abs(a-s);(o+c===1||1===c&&1===o)&&r.push(e)}),r}const d=e=>{e.preventDefault(),e.target.classList.contains("unopened")&&(e.target.classList.contains("flagged")?(e.target.classList.remove("flagged"),e.target.classList.add("question")):e.target.classList.contains("question")?e.target.classList.remove("question"):e.target.classList.add("flagged"),f())},m=e=>{!function e(t){t.classList.remove("unopened"),t.classList.add("opened"),0!==parseInt(t.getAttribute("data-number"),10)||t.classList.contains("mine")||u(t,e=>!e.classList.contains("opened")).forEach(t=>e(t))}(e.target),f()};function f(){c.forEach(e=>{e.classList.contains("mine")&&e.classList.contains("opened")&&(o.classList.add("lost"),c.forEach(e=>{e.removeEventListener("click",m),e.removeEventListener("contextmenu",d)}))});const e=(c=Array.from(c)).filter(e=>e.classList.contains("mine")).every(e=>e.classList.contains("flagged")),t=c.filter(e=>!e.classList.contains("mine")).every(e=>e.classList.contains("opened"));e&&t&&o.classList.add("won")}a.addEventListener("click",e=>{e.preventDefault(),l(),(c=document.querySelectorAll("td")).forEach(e=>{e.addEventListener("click",m),e.addEventListener("contextmenu",d)}),(i=document.querySelectorAll(".mine")).forEach(e=>{u(e,()=>!0).forEach(e=>e.setAttribute("data-number",parseInt(e.getAttribute("data-number"),10)+1))}),c.forEach(e=>{e.classList.contains("mine")||0===parseInt(e.getAttribute("data-number"),10)||e.classList.add(`mine-neighbour-${e.getAttribute("data-number")}`)})})}]);
//# sourceMappingURL=application.js.map